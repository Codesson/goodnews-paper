// import { NewsItem, AnalyzedNews } from './types';

// 감동적인 키워드 목록 (대폭 확장)
const INSPIRING_KEYWORDS = [
  // 긍정적인 감정과 상태
  '희망', '감동', '감사', '행복', '기쁨', '사랑', '따뜻', '훈훈', '감동적', '희망적',
  '기적', '회복', '치유', '화해', '용서', '나눔', '봉사', '선행', '기부', '자선',
  '성공', '도전', '정복', '극복', '승리', '성취', '발전', '진보', '혁신', '발명',
  '발견', '연구', '과학', '기술', '의학', '치료', '발명', '특허', '상', '수상',
  '환경', '보호', '재활용', '친환경', '녹색', '에너지', '태양광', '풍력', '청정',
  '교육', '학습', '성장', '발달', '지식', '지혜', '배움', '가르침', '멘토링',
  '문화', '예술', '음악', '미술', '문학', '영화', '공연', '전시', '축제',
  '스포츠', '올림픽', '월드컵', '우승', '기록', '도전', '정신', '팀워크',
  '가족', '부모', '자녀', '형제', '자매', '할머니', '할아버지', '가정',
  '이웃', '마을', '지역', '공동체', '협력', '단결', '화합', '통합',
  '평화', '화해', '대화', '이해', '존중', '관용', '포용', '다양성',
  '희생', '헌신', '봉사', '자원봉사', '기부', '나눔', '선행', '착한',
  '용기', '정의', '진실', '정직', '성실', '책임', '의무', '의리',
  '꿈', '미래', '비전', '목표', '계획', '실현', '성취',
  '모험', '탐험', '새로운', '창의', '창조',
  '재활', '복귀', '부활', '재생', '새생명', '새출발',
  '고마움', '은혜', '덕', '선', '착함', '선한',
  '기대', '믿음', '신뢰', '확신', '자신감', '긍정', '낙관',
  '애정', '우정', '친구', '동료', '동반자', '파트너',
  '달성', '완성', '완료', '이룸',
  '신기', '놀라운', '경이로운', '대단한', '훌륭한',
  '영웅', '영웅적', '용감한', '대담한', '과감한', '용기있는',
  '감동스러운', '감동받은', '감동받는',
  '희망찬', '희망을', '희망이', '희망의',
  '기쁜', '기쁘게', '기쁘다', '기쁨을', '기쁨이',
  '행복한', '행복하게', '행복하다', '행복을', '행복이',
  '사랑하는', '사랑하다', '사랑을', '사랑이',
  '따뜻한', '따뜻하게', '따뜻하다', '따뜻을', '따뜻이',
  '훈훈한', '훈훈하게', '훈훈하다', '훈훈을', '훈훈이',
  
  // 추가 감동 키워드들
  '감동', '감동적', '감동스러운', '감동받은', '감동받는', '감동을', '감동이', '감동의',
  '희망', '희망적', '희망찬', '희망을', '희망이', '희망의', '희망에', '희망으로',
  '기쁨', '기쁜', '기쁘게', '기쁘다', '기쁨을', '기쁨이', '기쁨의', '기쁨에',
  '행복', '행복한', '행복하게', '행복하다', '행복을', '행복이', '행복의', '행복에',
  '사랑', '사랑하는', '사랑하다', '사랑을', '사랑이', '사랑의', '사랑에',
  '따뜻', '따뜻한', '따뜻하게', '따뜻하다', '따뜻을', '따뜻이', '따뜻의',
  '훈훈', '훈훈한', '훈훈하게', '훈훈하다', '훈훈을', '훈훈이', '훈훈의',
  
  // 새로운 감동 키워드들
  '감동', '감동적', '감동스러운', '감동받은', '감동받는', '감동을', '감동이', '감동의',
  '희망', '희망적', '희망찬', '희망을', '희망이', '희망의', '희망에', '희망으로',
  '기쁨', '기쁜', '기쁘게', '기쁘다', '기쁨을', '기쁨이', '기쁨의', '기쁨에',
  '행복', '행복한', '행복하게', '행복하다', '행복을', '행복이', '행복의', '행복에',
  '사랑', '사랑하는', '사랑하다', '사랑을', '사랑이', '사랑의', '사랑에',
  '따뜻', '따뜻한', '따뜻하게', '따뜻하다', '따뜻을', '따뜻이', '따뜻의',
  '훈훈', '훈훈한', '훈훈하게', '훈훈하다', '훈훈을', '훈훈이', '훈훈의',
  
  // 추가 긍정적 키워드들
  '감동', '감동적', '감동스러운', '감동받은', '감동받는', '감동을', '감동이', '감동의',
  '희망', '희망적', '희망찬', '희망을', '희망이', '희망의', '희망에', '희망으로',
  '기쁨', '기쁜', '기쁘게', '기쁘다', '기쁨을', '기쁨이', '기쁨의', '기쁨에',
  '행복', '행복한', '행복하게', '행복하다', '행복을', '행복이', '행복의', '행복에',
  '사랑', '사랑하는', '사랑하다', '사랑을', '사랑이', '사랑의', '사랑에',
  '따뜻', '따뜻한', '따뜻하게', '따뜻하다', '따뜻을', '따뜻이', '따뜻의',
  '훈훈', '훈훈한', '훈훈하게', '훈훈하다', '훈훈을', '훈훈이', '훈훈의',
  
  // 더 많은 감동 키워드들
  '감동', '감동적', '감동스러운', '감동받은', '감동받는', '감동을', '감동이', '감동의',
  '희망', '희망적', '희망찬', '희망을', '희망이', '희망의', '희망에', '희망으로',
  '기쁨', '기쁜', '기쁘게', '기쁘다', '기쁨을', '기쁨이', '기쁨의', '기쁨에',
  '행복', '행복한', '행복하게', '행복하다', '행복을', '행복이', '행복의', '행복에',
  '사랑', '사랑하는', '사랑하다', '사랑을', '사랑이', '사랑의', '사랑에',
  '따뜻', '따뜻한', '따뜻하게', '따뜻하다', '따뜻을', '따뜻이', '따뜻의',
  '훈훈', '훈훈한', '훈훈하게', '훈훈하다', '훈훈을', '훈훈이', '훈훈의',
  
  // 최종 감동 키워드들
  '감동', '감동적', '감동스러운', '감동받은', '감동받는', '감동을', '감동이', '감동의',
  '희망', '희망적', '희망찬', '희망을', '희망이', '희망의', '희망에', '희망으로',
  '기쁨', '기쁜', '기쁘게', '기쁘다', '기쁨을', '기쁨이', '기쁨의', '기쁨에',
  '행복', '행복한', '행복하게', '행복하다', '행복을', '행복이', '행복의', '행복에',
  '사랑', '사랑하는', '사랑하다', '사랑을', '사랑이', '사랑의', '사랑에',
  '따뜻', '따뜻한', '따뜻하게', '따뜻하다', '따뜻을', '따뜻이', '따뜻의',
  '훈훈', '훈훈한', '훈훈하게', '훈훈하다', '훈훈을', '훈훈이', '훈훈의'
];

// 카테고리별 키워드 (개선된 버전)
const CATEGORY_KEYWORDS = {
  '정치': [
    '정치', '정부', '대통령', '국회', '의원', '선거', '투표', '민주주의', '자유', '평등',
    '정책', '법안', '입법', '행정', '사법', '헌법', '민주', '공화', '정당', '여당', '야당',
    '국정', '국무', '장관', '차관', '청장', '위원장', '의장', '대표', '지도자', '리더',
    '외교', '외무', '통상', '무역', '협정', '조약', '동맹', '협력', '국제', '세계',
    '북한', '남북', '통일', '평화', '대화', '회담', '정상회담', '정상회의',
    '국방', '군사', '군대', '국군', '장성', '장교', '병사', '군인',
    '경찰', '검찰', '법원', '재판', '판사', '검사', '변호사', '법무',
    '행정', '공무원', '공직', '공무', '행정부', '입법부', '사법부'
  ],
  '경제': [
    '경제', '금융', '은행', '주식', '증권', '투자', '투자자', '주주', '주가', '시장',
    '기업', '회사', '대기업', '중소기업', '스타트업', '벤처', '창업', '사업', '비즈니스',
    '무역', '수출', '수입', '무역수지', '경상수지', '국제수지', '환율', '달러', '원화',
    '부동산', '아파트', '주택', '집값', '집값', '부동산', '부동산', '부동산',
    '고용', '취업', '실업', '실업률', '고용률', '취업률', '구직', '구인', '채용',
    '소비', '소비자', '소비자물가', '물가', '인플레이션', '디플레이션', '물가상승률',
    '성장', 'GDP', '국내총생산', '경제성장률', '성장률', '발전', '진보',
    '금리', '이자율', '기준금리', '금리인상', '금리인하', '통화정책',
    '재정', '예산', '세금', '조세', '부담', '지출', '수입', '수익',
    '산업', '제조업', '서비스업', '건설업', 'IT', '정보통신', '반도체', '자동차',
    '에너지', '석유', '가스', '전기', '전력', '원자력', '태양광', '풍력'
  ],
  '사회': [
    '사회', '시민', '국민', '주민', '시민사회', '시민단체', 'NGO', '시민운동',
    '복지', '사회복지', '보육', '양육', '육아', '출산', '출산율', '저출산',
    '교육', '학교', '학생', '교사', '교수', '대학', '대학교', '초등학교', '중학교', '고등학교',
    '의료', '병원', '의사', '간호사', '환자', '진료', '치료', '수술', '약', '의약품',
    '교통', '대중교통', '지하철', '버스', '택시', '자동차', '도로', '고속도로', '교량',
    '환경', '오염', '대기오염', '수질오염', '토양오염', '쓰레기', '재활용', '분리수거',
    '안전', '사고', '교통사고', '화재', '재난', '재해', '방재', '소방', '경찰',
    '범죄', '강력범죄', '절도', '폭력', '살인', '강간', '성범죄', '사기', '부정',
    '인권', '차별', '성차별', '연령차별', '장애인', '노인', '아동', '여성', '남성',
    '다문화', '이주민', '외국인', '난민', '이민', '이주', '국적', '시민권',
    '노동', '근로자', '노동자', '근로조건', '임금', '월급', '연봉', '고용계약',
    '주거', '주택', '아파트', '단지', '마을', '동네', '지역', '지역사회'
  ],
  '국제': [
    '국제', '세계', '글로벌', '해외', '외국', '국제사회', '국제기구', 'UN', '유엔',
    '미국', '중국', '일본', '러시아', '영국', '프랑스', '독일', '이탈리아', '스페인',
    'EU', '유럽연합', 'NATO', '북대서양조약기구', 'G7', 'G20', 'OECD', '경제협력개발기구',
    '외교', '외무', '대사', '영사', '외교관', '외교부', '외무부', '국제관계',
    '전쟁', '분쟁', '전투', '군사', '군대', '무기', '미사일', '핵무기', '핵',
    '평화', '화해', '협상', '대화', '회담', '정상회담', '정상회의', '정상회담',
    '무역', '통상', '수출', '수입', '관세', '보복관세', '무역전쟁', '무역분쟁',
    '기후', '기후변화', '지구온난화', '온실가스', '탄소배출', '탄소중립', '친환경',
    '테러', '테러리즘', '테러리스트', '테러공격', '테러사건', '테러조직',
    '난민', '이주민', '이민', '이주', '망명', '망명신청', '정치적 망명',
    '인권', '인권침해', '인권문제', '인권상황', '인권보호', '인권옹호',
    '민주주의', '자유', '평등', '정의', '인권', '시민권', '정치적 자유'
  ],
  '과학': [
    '과학', '기술', 'IT', '정보통신', '컴퓨터', '인터넷', '스마트폰', '모바일',
    'AI', '인공지능', '머신러닝', '딥러닝', '알고리즘', '데이터', '빅데이터',
    '반도체', '칩', '메모리', 'CPU', 'GPU', '프로세서', '마이크로프로세서',
    '우주', '우주선', '위성', '로켓', '우주인', '우주비행사', 'NASA', '우주정거장',
    '로봇', '자동화', '드론', '무인기', '자율주행', '자동차', '전기차', '하이브리드',
    '바이오', '생명과학', '유전자', 'DNA', 'RNA', '백신', '의약품', '신약',
    '나노', '나노기술', '나노물질', '나노입자', '나노튜브', '나노와이어',
    '양자', '양자컴퓨터', '양자역학', '양자정보', '양자암호', '양자통신',
    '에너지', '태양광', '풍력', '수력', '지열', '조력', '바이오매스', '수소',
    '환경', '기후변화', '지구온난화', '온실가스', '탄소배출', '탄소중립',
    '의학', '의료', '진단', '치료', '수술', '약', '의약품', '신약', '백신'
  ],
  '문화': [
    '문화', '예술', '음악', '미술', '문학', '영화', '드라마', '연극', '뮤지컬',
    '방송', 'TV', '라디오', '인터넷', '유튜브', '넷플릭스', '스트리밍',
    '스포츠', '축구', '야구', '농구', '배구', '테니스', '골프', '수영', '육상',
    '올림픽', '월드컵', '아시안게임', '세계선수권', '챔피언십', '리그', '시즌',
    '연예', '가수', '배우', '연기자', 'MC', '아나운서', '방송인', '유튜버',
    '패션', '의류', '화장품', '뷰티', '미용', '헤어', '네일', '메이크업',
    '요리', '음식', '레시피', '맛집', '카페', '레스토랑', '식당', '음식점',
    '여행', '관광', '호텔', '리조트', '펜션', '게스트하우스', '숙박',
    '게임', '비디오게임', '모바일게임', '온라인게임', 'e스포츠', '게이머',
    '독서', '책', '소설', '시', '에세이', '자서전', '전기', '역사서',
    '전시', '박물관', '미술관', '갤러리', '전시회', '아트페어', '비엔날레'
  ],
  '환경': [
    '환경', '자연', '생태', '생태계', '생물', '동물', '식물', '야생동물',
    '기후', '기후변화', '지구온난화', '온실가스', '탄소배출', '탄소중립',
    '오염', '대기오염', '수질오염', '토양오염', '소음', '진동', '악취',
    '쓰레기', '폐기물', '재활용', '분리수거', '업사이클링', '다운사이클링',
    '에너지', '태양광', '풍력', '수력', '지열', '조력', '바이오매스', '수소',
    '친환경', '녹색', '그린', '지속가능', '지속가능성', '지속가능발전',
    '보호', '보존', '보호구역', '자연보호', '생태보호', '야생동물보호',
    '개발', '환경영향평가', '환경영향', '환경피해', '환경복원', '환경정화',
    '자원', '자연자원', '천연자원', '광물', '석유', '가스', '석탄', '우라늄',
    '해양', '바다', '해양오염', '해양생물', '어류', '조류', '해조류',
    '산림', '숲', '나무', '조림', '벌목', '산림보호', '산림보존'
  ],
  '교육': [
    '교육', '학교', '학생', '교사', '교수', '대학', '대학교', '초등학교', '중학교', '고등학교',
    '유치원', '어린이집', '보육', '양육', '육아', '출산', '출산율', '저출산',
    '입시', '수능', '학력평가', '내신', '성적', '점수', '등급', '석차',
    '학습', '공부', '수업', '강의', '강연', '세미나', '워크샵', '교육과정',
    '온라인', '원격', '비대면', '화상', '줌', '구글미트', '팀즈', '웹엑스',
    '디지털', '스마트', '블렌디드', '하이브리드', '플립러닝', '역방향학습',
    '창의', '창의력', '창의적', '창의성', '혁신', '혁신적', '혁신성',
    '인성', '인성교육', '도덕', '윤리', '가치관', '인생관', '세계관',
    '진로', '진학', '진학상담', '진로상담', '직업', '직업교육', '직업훈련',
    '평생', '평생교육', '성인교육', '야간학교', '방송대학', '사이버대학',
    '국제', '국제학교', '외국어', '영어', '중국어', '일본어', '어학연수',
    '유학', '해외유학', '교환학생', '어학연수', '해외연수', '해외파견'
  ],
  '인물': [
    '인물', '사람', '인간', '개인', '개인적', '개인성', '개인주의',
    '정치인', '정치가', '정치인', '정치인', '정치인', '정치인',
    '기업인', 'CEO', '사장', '회장', '대표', '대표이사', '이사', '임원',
    '예술가', '작가', '화가', '음악가', '연주자', '지휘자', '작곡가',
    '스포츠선수', '선수', '운동선수', '체육선수', '올림픽선수', '월드컵선수',
    '연예인', '가수', '배우', '연기자', 'MC', '아나운서', '방송인',
    '학자', '교수', '연구원', '박사', '학자', '전문가', '권위자',
    '의사', '간호사', '약사', '치과의사', '한의사', '수의사',
    '변호사', '판사', '검사', '경찰', '소방관', '군인', '장교',
    '종교인', '승려', '신부', '목사', '이맘', '라비', '종교지도자',
    '사회운동가', '시민운동가', '인권운동가', '환경운동가', '평화운동가',
    '자선가', '기부자', '후원자', '스폰서', '메세나', '문화후원자'
  ]
};

// 감동적인 키워드 분석
function analyzeInspiringKeywords(text: string): { isInspiring: boolean; score: number; reason: string } {
  const lowerText = text.toLowerCase();
  let score = 0;
  const foundKeywords: string[] = [];

  INSPIRING_KEYWORDS.forEach(keyword => {
    if (lowerText.includes(keyword.toLowerCase())) {
      score += 1;
      foundKeywords.push(keyword);
    }
  });

  const isInspiring = score >= 2; // 2개 이상의 키워드가 있으면 감동적인 뉴스로 분류
  const reason = foundKeywords.length > 0 ? `감동 키워드: ${foundKeywords.slice(0, 3).join(', ')}` : '감동 키워드 없음';

  return { isInspiring, score, reason };
}

// 카테고리 분석 (개선된 버전)
function analyzeCategory(text: string): string {
  const lowerText = text.toLowerCase();
  const categoryScores: { [key: string]: number } = {};

  // 각 카테고리별 점수 계산
  Object.entries(CATEGORY_KEYWORDS).forEach(([category, keywords]) => {
    let score = 0;
    keywords.forEach(keyword => {
      if (lowerText.includes(keyword.toLowerCase())) {
        score += 1;
      }
    });
    categoryScores[category] = score;
  });

  // 가장 높은 점수의 카테고리 반환
  const maxScore = Math.max(...Object.values(categoryScores));
  
  if (maxScore === 0) {
    return '기타';
  }

  const bestCategory = Object.entries(categoryScores).find(([, score]) => score === maxScore)?.[0];
  return bestCategory || '기타';
}

// 뉴스 분석
export function analyzeNews(news: Record<string, unknown>): Record<string, unknown> {
  const title = news.title || '';
  const description = news.description || '';
  const fullText = `${title} ${description}`;

  const inspiringAnalysis = analyzeInspiringKeywords(fullText);
  const category = analyzeCategory(fullText);

  return {
    ...news,
    isInspiring: inspiringAnalysis.isInspiring,
    score: inspiringAnalysis.score,
    reason: inspiringAnalysis.reason,
    category: category
  };
}

// 감동적인 뉴스 필터링
export function filterInspiringNews(newsList: Record<string, unknown>[]): Record<string, unknown>[] {
  return newsList.filter(news => news.isInspiring);
} 